"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyMakePackInfo=void 0;const ohos_logger_js_1=require("../../utils/log/ohos-logger.js"),task_names_js_1=require("../common/task-names.js"),legacy_merge_profile_js_1=require("./legacy-merge-profile.js");var LegacyFATask=task_names_js_1.TaskNames.LegacyFATask;const abstract_make_pack_info_js_1=require("../abstract-make-pack-info.js");class LegacyMakePackInfo extends abstract_make_pack_info_js_1.AbstractMakePackInfo{constructor(e){super(e,LegacyFATask.MAKE_PACK_INFO),this._log=ohos_logger_js_1.OhosLogger.getLogger(LegacyMakePackInfo.name)}initTaskDepends(){this.module.registryDependsOnTask(this,new legacy_merge_profile_js_1.LegacyMergeProfile(this.service))}doTaskAction(e){const s=this.service.getModuleModel(),a=s.getJsonObjByTargetName(e.getTargetName()),o=this.service.getProjectModel(),i={bundleName:a.app.bundleName,version:a.app.version};this.doMakePackInfo(this._log,e,o,s,i,this,!0)}getModuleObj(e,s){return{mainAbility:e.module.mainAbility,deviceType:e.module.deviceType,abilities:this.processAbilities(e.module.abilities),distro:e.module.distro,apiVersion:null!=s?s:e.app.apiVersion}}getPackageObj(e,s,a){return{deviceType:a?a.module.deviceType:e.module.deviceType,moduleType:e.module.distro.moduleType,deliveryWithInstall:e.module.distro.deliveryWithInstall,name:s}}}exports.LegacyMakePackInfo=LegacyMakePackInfo;